/**
 * React composable api
 * (c) 2024 Leto (Mikhail)
 * @license MIT
 * @link https://react-composable.com
 **/
(function(o,r){typeof exports=="object"&&typeof module<"u"?r(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],r):(o=typeof globalThis<"u"?globalThis:o||self,r(o["react-composable-api"]={},o.React))})(this,function(o,r){"use strict";function i({name:e,payload:t}){const n=new CustomEvent(e,{detail:{payload:t}});return{name:e,event:n,dispatch:()=>document.dispatchEvent(n)}}function d(e,t){const n=typeof e,c={set(u,s,f){return s==="value"?(u[s]=f,t(u.value),!0):!1}},H={set(u,s,f){return u[s]=f,t(Array.isArray(u)?[...u]:{...u}),!0},deleteProperty(u,s){return delete u[s],t(Array.isArray(u)?[...u]:{...u}),!0}},B={apply(u,s,f){return u.apply(s,f)}};if(n==="string"||n==="boolean"||n==="symbol")return new Proxy({value:e},c);if(n==="number")return new Proxy({value:e},{...c,set(u,s,f){return s==="value"&&typeof f=="number"?(u[s]=f,t(u.value),!0):(console.warn("New value must be a number"),!1)}});if(Array.isArray(e)||n==="object"&&e!==null)return new Proxy(e,H);if(n==="function")return new Proxy(e,B);throw new Error("Unsupported data type")}function M(e){const[t,n]=r.useState(e);return r.useMemo(()=>d(t,n),[t])}function w(e,t){Array.isArray(e)||(e=[e]);const n=r.useRef(!1);r.useEffect(()=>{if(!n.current){n.current=!0;return}t()},e)}function v(e){const t=r.useRef(!1);r.useEffect(()=>{t.current||(e(),t.current=!0)},[e])}function P(e){const t=r.useRef(!1),n=r.useRef(!1);r.useEffect(()=>{if(!t.current){t.current=!0;return}n.current||(e(),n.current=!0)},[e])}function R(e){r.useEffect(()=>{e()})}function A(e){const t=r.useRef(!1);r.useEffect(()=>()=>{t.current?e():t.current=!0},[])}function U(e,t){r.useEffect(()=>{const n=c=>t(c.detail.payload);return document.addEventListener(e,n),()=>{document.removeEventListener(e,n)}},[])}function j(e){return l(e),M(e)}function l(e){if(typeof e=="object"&&e!==null)for(const t in e)e.hasOwnProperty(t)&&(typeof e[t]=="object"&&e[t]!==null?l(e[t]):e[t]=d(e[t]))}const a=j,y=w,p=v,m=P,E=R,h=A,b=U,S={ref:a,createEvent:i,onEvent:b,watch:y,onBeforeMount:p,onMounted:m,onUpdate:E,onUnmount:h};o.createEvent=i,o.default=S,o.onBeforeMount=p,o.onEvent=b,o.onMounted=m,o.onUnmount=h,o.onUpdate=E,o.ref=a,o.watch=y,Object.defineProperties(o,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
