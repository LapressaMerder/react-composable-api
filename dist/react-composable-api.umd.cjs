/**
 * React composable api
 * (c) 2024 Leto (Mikhail)
 * @license MIT
 * @link https://react-composable.com
 **/
(function(o,r){typeof exports=="object"&&typeof module<"u"?r(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],r):(o=typeof globalThis<"u"?globalThis:o||self,r(o["react-composable-api"]={},o.React))})(this,function(o,r){"use strict";/**
 * React composable api
 * (c) 2024 Leto (Mikhail)
 * @license MIT
 * @link https://react-composable.com
 **/function a(e){const n=new CustomEvent(e.name,{detail:{payload:e.payload}}),t=()=>document.dispatchEvent(n);return{name:e.name,event:n,dispatch:t}}function h(e,n){const t=typeof e,c={set(u,f,i){return f==="value"?(u[f]=i,n(u.value),!0):!1}},w={set(u,f,i){return u[f]=i,n(Array.isArray(u)?[...u]:{...u}),!0},deleteProperty(u,f){return delete u[f],n(Array.isArray(u)?[...u]:{...u}),!0}},T={apply(u,f,i){return u.apply(f,i)}};if(t==="string"||t==="boolean"||t==="symbol"){const u={value:e};return new Proxy(u,c)}else if(t==="number"){const u={value:e};return new Proxy(u,{...c,set(f,i,b){return i==="value"?typeof b=="number"?(f[i]=b,n(f.value),!0):(console.warn("New value must be a number"),!1):!1}})}else{if(Array.isArray(e))return new Proxy(e,w);if(t==="object"&&e!==null)return new Proxy(e,w);if(t==="function")return new Proxy(e,T);throw new Error("Unsupported data type")}}function A(e){const[n,t]=r.useState(e);return r.useMemo(()=>h(n,t),[n])}function M(e,n){Array.isArray(e)||(e=[e]);const t=r.useRef(!1);r.useEffect(()=>{if(!t.current){t.current=!0;return}n()},e)}function P(e){const n=r.useRef(!1);r.useEffect(()=>{n.current||(e(),n.current=!0)},[e])}function R(e){const n=r.useRef(!1),t=r.useRef(!1);r.useEffect(()=>{if(!n.current){n.current=!0;return}t.current||(e(),t.current=!0)},[e])}function O(e){r.useEffect(()=>{e()})}function U(e){const n=r.useRef(!1);r.useEffect(()=>()=>{n.current?e():n.current=!0},[])}function j(e,n){const t=c=>n(c.detail.payload);r.useEffect(()=>(document.addEventListener(e,t),()=>{document.removeEventListener(e,t)}),[])}function B(e){return d(e),A(e)}function d(e){if(typeof e=="object"&&e!==null)for(let n in e)e.hasOwnProperty(n)&&(typeof e[n]=="object"&&e[n]!==null?d(e[n]):e[n]=s(e[n]))}const s=B,l=M,y=P,v=R,p=O,m=U,E=j,S={ref:s,createEvent:a,onEvent:E,watch:l,onBeforeMount:y,onMounted:v,onUpdate:p,onUnmount:m};o.createEvent=a,o.default=S,o.onBeforeMount=y,o.onEvent=E,o.onMounted=v,o.onUnmount=m,o.onUpdate=p,o.ref=s,o.watch=l,Object.defineProperties(o,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
