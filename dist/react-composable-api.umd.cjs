/**
 * React composable api
 * (c) 2024 Leto (Mikhail)
 * @license MIT
 * @link https://react-composable.com
 **/
(function(o,u){typeof exports=="object"&&typeof module<"u"?u(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],u):(o=typeof globalThis<"u"?globalThis:o||self,u(o["react-composable-api"]={},o.React))})(this,function(o,u){"use strict";function l(e){const n=new CustomEvent(e.name,{detail:{payload:e.payload}}),t=()=>document.dispatchEvent(n);return{name:e.name,event:n,dispatch:t}}function A(e,n){const t=typeof e,c={set(r,s,f){return s==="value"?(r[s]=f,n(r.value),!0):!1}},I={set(r,s,f){return r[s]=f,n(Array.isArray(r)?[...r]:{...r}),!0},deleteProperty(r,s){return delete r[s],n(Array.isArray(r)?[...r]:{...r}),!0}},j={apply(r,s,f){return r.apply(s,f)}};if(["string","boolean","symbol"].includes(t))return new Proxy({value:e},c);if(t==="number")return new Proxy({value:e},{...c,set(r,s,f){return s==="value"&&typeof f=="number"?(r[s]=f,n(r.value),!0):(console.warn("New value must be a number"),!1)}});if(Array.isArray(e)||t==="object"&&e!==null)return new Proxy(e,I);if(t==="function")return new Proxy(e,j);throw new Error("Unsupported data type")}function a(e){const[n,t]=u.useState(e);return u.useMemo(()=>A(n,t),[n])}function O(e,n){Array.isArray(e)||(e=[e]);const t=u.useRef(!1);u.useEffect(()=>{t.current?n():t.current=!0},e)}function v(e){const n=u.useRef(!1);u.useEffect(()=>{n.current||(e(),n.current=!0)},[e])}function P(e){const n=u.useRef(!1),t=u.useRef(!1);u.useEffect(()=>{n.current&&!t.current?(e(),t.current=!0):n.current=!0},[e])}function U(e){u.useEffect(()=>{e()})}function b(e){const n=u.useRef(!1);u.useEffect(()=>()=>{n.current?e():n.current=!0},[])}function H(e,n){const t=c=>n(c.detail.payload);u.useEffect(()=>(document.addEventListener(e,t),()=>{document.removeEventListener(e,t)}),[e,n])}function i(e){if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(i);const n={};for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=i(e[t]));return n}function S(e){const n=i(e);return a(n)}function T(e){const n=i(e);return y(n),a(n)}function y(e){if(typeof e=="object"&&e!==null)for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(typeof e[n]=="object"&&e[n]!==null?y(e[n]):e[n]=d(e[n]))}const d=S,p=T,m=O,E=v,w=P,M=U,R=b,h=H,B={ref:d,deepRef:p,createEvent:l,onEvent:h,watch:m,onBeforeMount:E,onMounted:w,onUpdate:M,onUnmount:R};o.createEvent=l,o.deepRef=p,o.default=B,o.onBeforeMount=E,o.onEvent=h,o.onMounted=w,o.onUnmount=R,o.onUpdate=M,o.ref=d,o.watch=m,Object.defineProperties(o,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
