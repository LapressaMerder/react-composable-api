/**
 * React composable api
 * (c) 2024 Leto (Mikhail)
 * @license MIT
 * @link https://react-composable.com
 **/
(function(r,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],o):(r=typeof globalThis<"u"?globalThis:r||self,o(r.ReactProxyState={},r.React))})(this,function(r,o){"use strict";function i(e){const n=new CustomEvent(e.name,{detail:{payload:e.payload}}),u=()=>document.dispatchEvent(n);return{name:e.name,event:n,dispatch:u}}function p(e,n){const u=typeof e,c={set(t,s,f){return s==="value"?(t[s]=f,n(t.value),!0):!1}},M={set(t,s,f){return t[s]=f,n(Array.isArray(t)?[...t]:{...t}),!0},deleteProperty(t,s){return delete t[s],n(Array.isArray(t)?[...t]:{...t}),!0}},B={apply(t,s,f){return t.apply(s,f)}};if(u==="string"||u==="boolean"||u==="symbol"){const t={value:e};return new Proxy(t,c)}else if(u==="number"){const t={value:e};return new Proxy(t,{...c,set(s,f,h){return f==="value"?typeof h=="number"?(s[f]=h,n(s.value),!0):(console.warn("New value must be a number"),!1):!1}})}else{if(Array.isArray(e))return new Proxy(e,M);if(u==="object"&&e!==null)return new Proxy(e,M);if(u==="function")return new Proxy(e,B);throw new Error("Unsupported data type")}}function w(e){const[n,u]=o.useState(e);return o.useMemo(()=>p(n,u),[n])}function b(e,n){Array.isArray(e)||(e=[e]);const u=o.useRef(!1);o.useEffect(()=>{if(!u.current){u.current=!0;return}n()},e)}function P(e){const n=o.useRef(!1);o.useEffect(()=>{n.current||(e(),n.current=!0)},[e])}function A(e){const n=o.useRef(!1),u=o.useRef(!1);o.useEffect(()=>{if(!n.current){n.current=!0;return}u.current||(e(),u.current=!0)},[e])}function R(e){o.useEffect(()=>{e()})}function U(e){const n=o.useRef(!1);o.useEffect(()=>()=>{n.current?e():n.current=!0},[])}function j(e,n){const u=c=>n(c.detail.payload);o.useEffect(()=>(document.addEventListener(e,u),()=>{document.removeEventListener(e,u)}),[])}const l=w,d=b,y=P,a=A,m=R,v=U,E=j,x={ref:l,createEvent:i,onEvent:E,watch:d,onBeforeMount:y,onMounted:a,onUpdate:m,onUnmount:v};r.createEvent=i,r.default=x,r.onBeforeMount=y,r.onEvent=E,r.onMounted=a,r.onUnmount=v,r.onUpdate=m,r.ref=l,r.watch=d,Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
