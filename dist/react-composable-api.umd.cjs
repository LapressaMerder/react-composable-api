/**
 * React composable api
 * (c) 2024 Leto (Mikhail)
 * @license MIT
 * @link https://react-composable.com
 **/
(function(o,u){typeof exports=="object"&&typeof module<"u"?u(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],u):(o=typeof globalThis<"u"?globalThis:o||self,u(o["react-composable-api"]={},o.React))})(this,function(o,u){"use strict";/**
 * React composable api
 * (c) 2024 Leto (Mikhail)
 * @license MIT
 * @link https://react-composable.com
 **/function l(e){const n=new CustomEvent(e.name,{detail:{payload:e.payload}}),t=()=>document.dispatchEvent(n);return{name:e.name,event:n,dispatch:t}}function O(e,n){const t=typeof e,f={set(r,c,i){return c==="value"?(r[c]=i,n(r.value),!0):!1}},h={set(r,c,i){return r[c]=i,n(Array.isArray(r)?[...r]:{...r}),!0},deleteProperty(r,c){return delete r[c],n(Array.isArray(r)?[...r]:{...r}),!0}},C={apply(r,c,i){return r.apply(c,i)}};if(t==="string"||t==="boolean"||t==="symbol"){const r={value:e};return new Proxy(r,f)}else if(t==="number"){const r={value:e};return new Proxy(r,{...f,set(c,i,A){return i==="value"?typeof A=="number"?(c[i]=A,n(c.value),!0):(console.warn("New value must be a number"),!1):!1}})}else{if(Array.isArray(e))return new Proxy(e,h);if(t==="object"&&e!==null)return new Proxy(e,h);if(t==="function")return new Proxy(e,C);throw new Error("Unsupported data type")}}function P(e){const[n,t]=u.useState(e);return u.useMemo(()=>O(n,t),[n])}function M(e,n){Array.isArray(e)||(e=[e]);const t=u.useRef(!1);u.useEffect(()=>{if(!t.current){t.current=!0;return}n()},e)}function R(e){const n=u.useRef(!1);u.useEffect(()=>{n.current||(e(),n.current=!0)},[e])}function b(e){const n=u.useRef(!1),t=u.useRef(!1);u.useEffect(()=>{if(!n.current){n.current=!0;return}t.current||(e(),t.current=!0)},[e])}function U(e){u.useEffect(()=>{e()})}function g(e){const n=u.useRef(!1);u.useEffect(()=>()=>{n.current?e():n.current=!0},[])}function B(e,n){const t=f=>n(f.detail.payload);u.useEffect(()=>(document.addEventListener(e,t),()=>{document.removeEventListener(e,t)}),[])}function s(e){if(e===null||typeof e!="object")return e;if(Array.isArray(e)){const t=[];for(let f=0;f<e.length;f++)t[f]=s(e[f]);return t}const n={};for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=s(e[t]));return n}function S(e){const n=s(e);return y(n),P(n)}function y(e){if(typeof e=="object"&&e!==null)for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(typeof e[n]=="object"&&e[n]!==null?y(e[n]):e[n]=a(e[n]))}const a=S,d=M,p=R,v=b,m=U,E=g,w=B,T={ref:a,createEvent:l,onEvent:w,watch:d,onBeforeMount:p,onMounted:v,onUpdate:m,onUnmount:E};o.createEvent=l,o.default=T,o.onBeforeMount=p,o.onEvent=w,o.onMounted=v,o.onUnmount=E,o.onUpdate=m,o.ref=a,o.watch=d,Object.defineProperties(o,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
