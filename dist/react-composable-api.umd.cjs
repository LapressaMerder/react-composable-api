/**
 * React composable api
 * (c) 2024 Leto (Mikhail)
 * @license MIT
 * @link https://react-composable.com
 **/
(function(o,r){typeof exports=="object"&&typeof module<"u"?r(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],r):(o=typeof globalThis<"u"?globalThis:o||self,r(o["react-composable-api"]={},o.React))})(this,function(o,r){"use strict";function l(e){const n=new CustomEvent(e.name,{detail:{payload:e.payload}}),u=()=>document.dispatchEvent(n);return{name:e.name,event:n,dispatch:u}}function w(e,n){const u=typeof e,i={set(t,s,f){return s==="value"?(t[s]=f,n(t.value),!0):!1}},h={set(t,s,f){return t[s]=f,n(Array.isArray(t)?[...t]:{...t}),!0},deleteProperty(t,s){return delete t[s],n(Array.isArray(t)?[...t]:{...t}),!0}},C={apply(t,s,f){return t.apply(s,f)}};if(u==="string"||u==="boolean"||u==="symbol"){const t={value:e};return new Proxy(t,i)}else if(u==="number"){const t={value:e};return new Proxy(t,{...i,set(s,f,M){return f==="value"?typeof M=="number"?(s[f]=M,n(s.value),!0):(console.warn("New value must be a number"),!1):!1}})}else{if(Array.isArray(e))return new Proxy(e,h);if(u==="object"&&e!==null)return new Proxy(e,h);if(u==="function")return new Proxy(e,C);throw new Error("Unsupported data type")}}function P(e){const[n,u]=r.useState(e);return r.useMemo(()=>w(n,u),[n])}function A(e,n){Array.isArray(e)||(e=[e]);const u=r.useRef(!1);r.useEffect(()=>{if(!u.current){u.current=!0;return}n()},e)}function R(e){const n=r.useRef(!1);r.useEffect(()=>{n.current||(e(),n.current=!0)},[e])}function U(e){const n=r.useRef(!1),u=r.useRef(!1);r.useEffect(()=>{if(!n.current){n.current=!0;return}u.current||(e(),u.current=!0)},[e])}function b(e){r.useEffect(()=>{e()})}function B(e){const n=r.useRef(!1);r.useEffect(()=>()=>{n.current?e():n.current=!0},[])}function H(e,n){const u=i=>n(i.detail.payload);r.useEffect(()=>(document.addEventListener(e,u),()=>{document.removeEventListener(e,u)}),[])}function T(e){return d(e),P(e)}function d(e){if(typeof e=="object"&&e!==null)for(let n in e)e.hasOwnProperty(n)&&(typeof e[n]=="object"&&e[n]!==null?d(e[n]):e[n]=c(e[n]))}const c=T,y=A,a=R,m=U,p=b,v=B,E=H,x={ref:c,createEvent:l,onEvent:E,watch:y,onBeforeMount:a,onMounted:m,onUpdate:p,onUnmount:v};o.createEvent=l,o.default=x,o.onBeforeMount=a,o.onEvent=E,o.onMounted=m,o.onUnmount=v,o.onUpdate=p,o.ref=c,o.watch=y,Object.defineProperties(o,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
